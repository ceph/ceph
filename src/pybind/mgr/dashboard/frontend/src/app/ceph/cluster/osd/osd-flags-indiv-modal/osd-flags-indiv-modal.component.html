<cds-modal size="sm"
           [open]="open"
           [hasScrollingContent]="false"
           (overlaySelected)="closeModal()">
  <cds-modal-header (closeSelect)="closeModal()">
    <h3 cdsModalHeaderHeading
        i18n>Individual OSD Flags</h3>
  </cds-modal-header>

  <div cdsModalContent>
    <form name="osdFlagsForm"
          #formDir="ngForm"
          [formGroup]="osdFlagsForm"
          novalidate>
      <div class="osd-modal">
        @for (flag of flags; track flag.code; let last = $last) {
        <div>
          <cds-checkbox
            [checked]="flag.value"
            [indeterminate]="flag.indeterminate"
            (checkedChange)="changeValue(flag)"
            [name]="flag.code"
            [id]="flag.code"
          >
            <strong>{{ flag.name }}</strong>
            @if (flag.clusterWide) {
            <cds-tag class="tag-hdd"
                     [cdsTooltip]="clusterWideTooltip"
                     trigger="hover"
                     i18n>Cluster-wide</cds-tag>
            }

            <span class="cds--label-description">{{ flag.description }}</span>
          </cds-checkbox>
          @if (!last) {
          <hr />
          }
        </div>
        }
      </div>
    </form>
  </div>

  <cds-modal-footer>
    <button [cdsButton]="'secondary'"
            (click)="resetSelection()"
            type="button"
            i18n>
      Restore previous selection
    </button>
    <button [cdsButton]="'secondary'"
            (click)="closeModal()"
            type="button"
            i18n>
      Cancel
    </button>
    @if (permissions.osd.update) {
    <cd-submit-button
      (submitAction)="submitAction()"
      [form]="osdFlagsForm"
      [submitText]="actionLabels.UPDATE"
    >{{ actionLabels.UPDATE }}</cd-submit-button>
    }
  </cds-modal-footer>
</cds-modal>
