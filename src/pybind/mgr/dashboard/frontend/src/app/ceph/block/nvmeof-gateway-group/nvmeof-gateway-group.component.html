<ng-container *ngIf="gatewayGroup$ | async as gateways">
  <cd-table
    #table
    [data]="gateways"
    [columns]="columns"
    columnMode="flex"
    selectionType="single"
    identifier="name"
    [selection]="selection"
    (updateSelection)="updateSelection($event)"
    (fetchData)="fetchData()">
    <cd-table-actions
            class="table-actions"
            [permission]="permission"
            [selection]="selection"
            [tableActions]="tableActions">
    </cd-table-actions>
  </cd-table>
</ng-container>

<ng-template #dateTpl
             let-created="data.value">
  <span *ngIf="created">{{ created | date:'EEE d MMM, yyyy' }}</span>
</ng-template>

<ng-template #gatewayStatusTpl
             let-gateway="data.value">
  <div [cdsStack]="'horizontal'"
       gap="4">

    @if (gateway.running > 0) {
    <span>
      <cd-icon   type="success"></cd-icon>
      <span class="cds-ml-3">{{ gateway.running }}</span>
    </span>
  }

  @if (gateway.error > 0) {
    <span class="cds-ml-3">
      <cd-icon   type="error"></cd-icon>
      <span class="cds-ml-3">{{ gateway.error }}</span>
    </span>
  }


  </div>
</ng-template>

<ng-template #deleteTpl
             let-groupName="groupName"
             let-subsystemCount="subsystemCount">
  <ng-container *ngIf="subsystemCount > 0">
    <p class="cds-mb-4"
       i18n>
      The gateway group <strong>{{ groupName }}</strong> contains <strong>{{ subsystemCount }}</strong> subsystem(s).
    </p>

    <div class="cds-theme-zone-g10 cds-p-3 cds-mb-4">
      <cd-icon type="warning"></cd-icon>
      <span i18n>Please delete all subsystems before deleting the gateway group.</span>
    </div>
  </ng-container>

  <ng-container *ngIf="subsystemCount === 0">
    <p i18n
       class="cds-mb-4">
      Are you sure you want to delete the gateway group <strong>{{ groupName }}</strong>?
    </p>
  </ng-container>
</ng-template>
